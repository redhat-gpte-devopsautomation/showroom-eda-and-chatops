= Solution Addressing The Challenges
:navtitle: 5: Admin - Connecting ChatOps

:numbered:
:rocketchat_auth_token: gWa8hxUS2qQXsnvaRwstmoRgDpdKVBbGfZ9BPUyDhmC
:rocketchat_user_id: DSZJkBEZPfGzFtjbu
== Addressing Challenge: 

As an administrator, streamlining the integration of the ChatOps system with Event-Driven Architecture (EDA) proves to be a seamless process. This integration offers a significant advantage for product managers, enabling them to effortlessly issue commands directly from the chat system. This functionality empowers product managers to swiftly trigger changes for specific categories, such as applying discounts or disabling a particular category on the online retail website.


== Solution

. Access the Automation Controller to create a Job Template that facilitates the execution of actions on products within the Smart Retail Application. This should be triggered by messages posted by the product manager in RocketChat. The necessary details are provided below:

+
****
TIP: You can skip the login process if you're already signed in.

.. Kindly find the login details for accessing Automation Controller below:
+
* *Automation Controller:* {aap_controller_web_url}
* *Username:* {aap_controller_admin_user}
* *Password:* {aap_controller_admin_password}
****

+
****
.. Navigate to Job Templates and proceed to create a new template with the following details:
+
* *Name:* chatops-action
* *Job Type:* Run
* *Inventory:* Demo Inventory
* *Project:* event-driven-ansible-and-chatops
* *Playbook:* playbooks/chatops-action.yml
* *Credentials:*
  ** *Selected Category:* OpenShift or Kubernetes API Bearer Token
  ** *Select:* OpenShift Credentials
* *Variables:* Kindly copy and paste the provided variables into the YAML format below for ease of use and implementation.
+
|===
|---
|eda_chatops_retail_db_host: globex-db.globex.svc.cluster.local
|eda_chatops_retail_db_name: globex
|eda_chatops_retail_db_password: globex
|eda_chatops_retail_db_username: globex
|rocketchat_url: {rocketchat_url}
|rocketchat_auth_token: {rocketchat_auth_token}
|rocketchat_user_id: {rocketchat_user_id}
|...
|===
* *Select Checkbox:* [] Prompt on Launch 
****

. Access Event-driven Ansible to configure Rulebook Activation, facilitating the automatic triggering of an Ansible Controller Job Template upon submitting feedback in the Smart Retail Application. Please refer to the details provided below:

+
****
.. Login details:
+
* Event-driven Ansible => {eda_controller_web_url}
* Username => {eda_controller_admin_user}
* Password => {eda_controller_admin_password}

.. Navigate to Rulebook Activation and proceed to add a new rulebook following the details provided below:
+
* Name => test
* project =>
* playbook =>
****


. Access the OpenShift Console to configure routing for the Event-driven Ansible rulebook activation created in the previous step. Refer to the details provided below:

+
****
.. Login details:
+
* Console URL => {openshift_console_url}
* Username => {openshift_cluster_admin_username}
* Password => {openshift_cluster_admin_password}

.. Select *aap* project.
.. Navigate to route and create new route as per details give below:
+

* Name => test
* project =>
* playbook =>
****


. Access RocketChat to establish a webhook for Event-driven Ansible, following the details provided below:

+
****
.. Login details-
+
* RocketChat Url => {rocketchat_url}
* Username => admin
* Password => {rocketchat_admin_password}

.. Navigate to administration option and then click integration

TIP | Click on other links 02then back to integration if nothing get displayed upon first click).

.. Click on New Integration then click Outgoing Webhook.
.. Select Message sent from the dropdown list  for the Event Trigger.
.. Fill the option as follows:
+
* Name => Event-driven Ansible and ChatOps
* Channel => #clothing,#utensils
* Trigger Words => update,continue,discontinue
* Urls => Paste the eda-route link here
* Impersonate User => True
* Post as => admin

.. Leave the rest as default
.. Click on Save Changes from above right corner

****

